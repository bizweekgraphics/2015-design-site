function mailChimpCallback(){$("form input#mce-FNAME").val(""),$("form input#mce-EMAIL").val("")}function hijackLinks(){if(isiPad()||isMobile()){var t=navigator.userAgent;t.match(/iPad/i)?"touchstart":"click"}isMobile()?($("div.menu a").click(function(t){t.preventDefault(),"block"==$("header nav").css("display")?$("header nav").hide():$("header nav").show()}),$("nav a").each(function(){$(this).bind("click",function(t){t.preventDefault()});var t=$(this).attr("href").split("/")[1];$(this).parent().bind("click",function(){$("header nav").hide(),document.location.hash=t})})):($("nav a").each(function(){$(this).bind("click",function(t){t.preventDefault()});var t=$(this).attr("href").split("/")[1];$(this).parent().bind("click",function(){goToSection(t)})}),$("div.speaker a").each(function(t,e){$(e).unbind().bind("click",function(t){t.preventDefault();var e=$(this).attr("href");$.ajax({url:e,dataType:"html",success:function(t){var e=$.parseHTML(t);$("#lightbox").html($($(e)[34])),$("div.social a").each(function(t,e){""==$(e).attr("href")&&$(e).remove()}),showModal()}})})})),$("div.speaker a").each(function(t,e){"/andmore"==$(e).attr("href")&&($(e).css("cursor","default"),$(e).unbind().bind("click",function(t){t.preventDefault()}))})}function goToSection(t,e){var a;if(e)switch(t){case"about":a=370;break;case"speakers":a=1700;break;case"schedule":a=2640;break;case"location":a=3175}else $("section").each(function(e,n){$(n).find("article").attr("id")==t&&(a=1500*e-500,0>a&&(a=750),$(window).scrollTop(a))});$(window).scrollTop(a)}function interfaceAnimateIn(){enable3D?($("#container").transition({opacity:1},250,"snap"),$("#intro").parent().transition({transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"},250,"snap")):$("#container").transition({opacity:1},250,"snap")}function onResize(){var t=$(window).width(),e=$(window).height(),a=$("article#speakers div.speaker div.imgContainer").first().width();if($("article#speakers div.speaker div.imgContainer").height(a),$("div.speaker").height(Math.ceil($("div.speaker").width())),780>e?$("#intro, #location").removeClass("verticallyCentered"):$("#intro, #location").addClass("verticallyCentered"),500>t?(enable3D=!1,$("body").addClass("mobile"),$("#intro h1").fitText(1.1)):(enable3D=!0,$("body").removeClass("mobile"),$("#intro h1").fitText(.7)),enable3D){$("#environment").height(e-400);var n=e-265;$("article").each(function(t,e){"intro"==$(e).attr("id")||"location"==$(e).attr("id")||$(e).css({height:n,"overflow-y":"scroll"})}),$("#lightbox").css("height",e-Math.floor(.2*e))}}function mouseHandler(){function t(t,e){var a,n,i,r,s,o,c,p,l=t.clientX,d=t.clientY;return e===!1?0:(p=e.time,a=e.clientX,n=e.clientY,i=Date.now(),r=a-l,s=n-d,o=i-p,l=a,d=n,c=Math.sqrt(r*r+s*s)/o)}var e=!1;$(document).mousemove(function(a){a.time=Date.now();var n;n=t(a,e),e=a,mouseVelocity=n})}function scrollHandler(){var t,e=$(window).scrollTop();$(window).unbind("scroll").scroll(function(){enable3D&&(e=$(window).scrollTop(),50>e?$("article#intro").parent().css("opacity")==panelOpacity&&(activateSection("intro"),star_speed=20*(0-currentSectionIndex),t=star_speed>0?1:-1,setTimeout(function(){currentSectionIndex=0,$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500),$("article#intro").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"}),$("article#about").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -1000px)","-webkit-transform":"translate3d(0px, 0px, -1000px)"}),$("article#speakers").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -2000px)","-webkit-transform":"translate3d(0px, 0px, -2000px)"}),$("article#schedule").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -3000px)","-webkit-transform":"translate3d(0px, 0px, -3000px)"}),$("article#location").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -4000px)","-webkit-transform":"translate3d(0px, 0px, 4000px)"})):1500>e?$("article#about").parent().css("opacity")==panelOpacity&&(activateSection("about"),star_speed=20*(1-currentSectionIndex),t=star_speed>0?1:-1,setTimeout(function(){currentSectionIndex=1,$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500),$("article#intro").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 1000px)","-webkit-transform":"translate3d(0px, 0px, 1000px)"}),$("article#about").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"}),$("article#speakers").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -1000px)","-webkit-transform":"translate3d(0px, 0px, -1000px)"}),$("article#schedule").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -2000px)","-webkit-transform":"translate3d(0px, 0px, -2000px)"}),$("article#location").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -3000px)","-webkit-transform":"translate3d(0px, 0px, 3000px)"})):3e3>e?$("article#speakers").parent().css("opacity")==panelOpacity&&(activateSection("speakers"),star_speed=20*(2-currentSectionIndex),t=star_speed>0?1:-1,setTimeout(function(){currentSectionIndex=2,$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500),$("article#intro").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 2000px)","-webkit-transform":"translate3d(0px, 0px, 2000px)"}),$("article#about").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 1000px)","-webkit-transform":"translate3d(0px, 0px, 1000px)"}),$("article#speakers").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"}),$("article#schedule").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -1000px)","-webkit-transform":"translate3d(0px, 0px, -1000px)"}),$("article#location").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -2000px)","-webkit-transform":"translate3d(0px, 0px, -2000px)"})):4500>e?$("article#schedule").parent().css("opacity")==panelOpacity&&(activateSection("schedule"),star_speed=20*(3-currentSectionIndex),t=star_speed>0?1:-1,setTimeout(function(){currentSectionIndex=3,$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500),$("article#intro").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 3000px)","-webkit-transform":"translate3d(0px, 0px, 3000px)"}),$("article#about").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 2000px)","-webkit-transform":"translate3d(0px, 0px, 2000px)"}),$("article#speakers").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 1000px)","-webkit-transform":"translate3d(0px, 0px, 1000px)"}),$("article#schedule").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"}),$("article#location").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -1000px)","-webkit-transform":"translate3d(0px, 0px, -1000px)"})):6e3>e&&$("article#location").parent().css("opacity")==panelOpacity&&(activateSection("location"),star_speed=20*(4-currentSectionIndex),t=star_speed>0?1:-1,setTimeout(function(){currentSectionIndex=4,$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500),$("article#intro").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 4000px)","-webkit-transform":"translate3d(0px, 0px, 4000px)"}),$("article#about").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 3000px)","-webkit-transform":"translate3d(0px, 0px, 3000px)"}),$("article#speakers").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 2000px)","-webkit-transform":"translate3d(0px, 0px, 2000px)"}),$("article#schedule").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 1000px)","-webkit-transform":"translate3d(0px, 0px, 1000px)"}),$("article#location").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"})))})}function activateSection(t){$("header#header nav li a").each(function(e,a){$(a).attr("href").indexOf(t)>-1?$(a).parent().addClass("active"):$(a).parent().removeClass("active")}),$("article#"+t).focus(),navigator.userAgent.match(/Windows/)&&$("section").each(function(e,a){$(a).show(),$(a).find("article").attr("id")!=t&&setTimeout(function(){$(a).hide()},500)})}function animateCTA(){var t,e=["#FF0000","#007EFF","#01A400","#8e25fb"];intervalCTA=setInterval(function(){t=e[Math.floor(Math.random()*e.length)],$("#buytickets button").transition({background:t},100,"cubic-bezier(0.42, 0, 0.58, 1)")},2500),$("#buytickets button").unbind("mouseenter").bind("mouseenter",function(){$("#buytickets button").transition({background:"#fd96fd"},0),clearInterval(intervalCTA),clearTimeout(timeoutCTA)}),$("#buytickets button").unbind("mouseleave").bind("mouseleave",function(){$("#buytickets button").transition({background:t},0),animateCTA()})}function animateIntro(){var t=["blue","green","red","purple"],e=shuffle($("#intro h1 div"));$(e).each(function(e,a){function n(){var e=Math.floor(20*Math.random());e>9&&(e-=10),0==e&&(e=1);var i=250*e;e=Math.floor(Math.random()*t.length);var r=t[e];$(a).removeClass().addClass(r),setTimeout(function(){$(a).addClass("neon"),setTimeout(function(){$(a).removeClass("neon"),n()},150)},i)}n()})}function isMobile(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}function isiPad(){return-1!=navigator.platform.indexOf("iPad")}function onOrientation(){if(isiPad()){$("header#header nav li").css({padding:"5px"});var t=window.orientation;0==t||180==t?($("html").css({"font-size":"100%"}),$(".csstransforms3d #environment").css({top:"200px"}),$("article#intro").css({"margin-top":"50px",overflow:"auto"}),$("article").css({"margin-top":"30px",height:"auto"}),$("article#location iframe").css({height:"400px"}),$("article#location").css({"margin-top":"90px"}),$("#location #map img").css({"margin-top":"55%"})):(90==t||-90==t)&&($("html").css({"font-size":"75%"}),$(".csstransforms3d #environment").css({top:"160px"}),$("article#intro").css({overflow:"hidden"}),$("article").css({"margin-top":"60px","min-height":"320px"}),$("article#location").css({"margin-top":"60px"}),$("#location #map img").css({"margin-top":"15%"}))}}function showStarfield(){"none"==$("#starfield").css("display")&&($("#starfield").show(),startStars()),$("#starfield").transition({opacity:1},500,"out",function(){$("html").css({background:"black"})})}function hideStarfield(){$("#starfield").transition({opacity:0},500,"out",function(){})}function showModal(){$("body").css("overflow","hidden"),$("#dim").show(),$("#lightbox").transition({opacity:1},250,"snap",function(){$("#lightbox").attr("tabindex",1),$("#lightbox").focus()}),$("#dim").transition({opacity:1},250,"snap",function(){$("#dim button").bind("click",function(){hideModal()})})}function hideModal(){$("body").css("overflow","auto"),$("#lightbox").css({opacity:0}),$("#dim").css({opacity:0}),$("#dim").hide(),$("#lightbox").empty(),$("#speakers").attr("tabindex",1),$("#speakers").focus()}function shuffle(t){for(var e,a,n=t.length;0!==n;)a=Math.floor(Math.random()*n),n-=1,e=t[n],t[n]=t[a],t[a]=e;return t}var mouseVelocity,intervalCTA,timeoutCTA,colorInterval,enable3D=!0,currentSectionIndex=0,star_init_speed=100,panelOpacity=.25;$(document).ready(function(){navigator.userAgent.match(/Windows/)&&($("body").addClass("msie"),panelOpacity=0),(isiPad()||isMobile())&&FastClick.attach(document.body),$("section").first().next().after($("section").last());var t=[],e=[];$(".speaker").each(function(a,n){var i=$(n).attr("id").split(" ")[1],r={element:n,name:i};"more"!=i?t.push(r):e.push(r)}),t.sortBy(function(t){return t.name}),$("#speakers div.speaker").remove(),$(t).each(function(t,e){$("#speakers").append(e.element)}),$(e).each(function(t,e){$(e.element).find("div.backdrop").remove(),$(e.element).find("p").remove(),$("#speakers").append(e.element)}),$("#logo").bind("click",function(){$(window).scrollTop(0),setTimeout(function(){$({_value:star_speed}).animate({_value:-1},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500)}),hijackLinks(),$("form#mailChimp").ajaxChimp({url:"http://bloombergbusinessweekdesign.us3.list-manage.com/subscribe/post?u=f00bc2551187afbf5ff85bf4a&id=313c6fc06d",callback:mailChimpCallback}),$("#schedule li strong").wrap('<div class="scheduleTime">'),$("#schedule h3").each(function(t,e){var a=$(e).attr("id"),n=[];n.push(e),n.push($(e).next()),n.push($(e).next().next());var i;for(i=$(a.indexOf("oos")>-1?'<div class="session oos"></div>':'<div class="session" id="'+a+'"></div>'),i.insertBefore(n[0]),t=0;t<n.length;t++)$(i).append(n[t])}),$("#schedule div.session li p strong").parent().addClass("timeframe"),$("div.timeframe").each(function(t,e){$(e).height($(e).parent().height())}),$("#location p").each(function(t,e){var a=[];a.push(e);var n=$('<div class="mapLabel"></div>');for(n.insertBefore(a[0]),t=0;t<a.length;t++)$(n).append(a[t])}),$("#location .mapLabel p").fitText(1.6,{maxFontSize:"24px"}),$("article").append("<p><br/></p>"),window.onorientationchange=function(){onOrientation()},onOrientation(),$(window).bind("resize",$.throttle(150,onResize)),setTimeout(function(){isMobile()||(star_speed=star_init_speed,showStarfield(),animateCTA(),animateIntro()),enable3D?(setTimeout(function(){interfaceAnimateIn(),scrollHandler(),mouseHandler(),$({_value:star_init_speed}).animate({_value:1},{duration:1500,easing:"easeOutQuart",step:function(){star_speed=this._value}})},50),setTimeout(function(){$(window).scrollTop(0)},500)):interfaceAnimateIn(),$(window).resize()},500)}),function(){function t(t){for(var e=this.length;e;){var a=this[--e];this[e]=[].concat(t.call(a,a,e),a)}this.sort(function(t,e){for(var a=0,n=t.length;n>a;++a)if(t[a]!=e[a])return t[a]<e[a]?-1:1;return 0});for(var e=this.length;e;)this[--e]=this[e][this[e].length-1];return this}if("function"==typeof Object.defineProperty)try{Object.defineProperty(Array.prototype,"sortBy",{value:t})}catch(e){}Array.prototype.sortBy||(Array.prototype.sortBy=t)}();