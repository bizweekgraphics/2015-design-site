function mailChimpCallback(e){$("form input#mce-FNAME").val("");$("form input#mce-EMAIL").val("")}function hijackLinks(){if(isiPad()||isMobile()){var e=navigator.userAgent,t=e.match(/iPad/i)?"touchstart":"click"}if(isMobile()){$("div.menu a").click(function(e){e.preventDefault();if($("header nav").css("display")=="block"){$("header nav").hide()}else{$("header nav").show()}});$("nav a").each(function(e,t){$(this).bind("click",function(e){e.preventDefault()});var n=$(this).attr("href").split("/")[1];$(this).parent().bind("click",function(e){$("header nav").hide();document.location.hash=n})})}else{$("nav a").each(function(e,t){$(this).bind("click",function(e){e.preventDefault()});var n=$(this).attr("href").split("/")[1];$(this).parent().bind("click",function(e){goToSection(n)})});$("div.speaker a").each(function(e,t){$(t).unbind().bind("click",function(e){e.preventDefault();var t=$(this).attr("href");$.ajax({url:t,dataType:"html",success:function(e){var t=$.parseHTML(e);$("#lightbox").html($($(t)[34]));$("div.social a").each(function(e,t){if($(t).attr("href")==""){$(t).remove()}});showModal()}})})})}$("div.speaker a").each(function(e,t){if($(t).attr("href")=="/andmore"){$(t).css("cursor","default");$(t).unbind().bind("click",function(e){e.preventDefault()})}})}function goToSection(e,t){var n;if(t){switch(e){case"about":n=370;break;case"speakers":n=1700;break;case"schedule":n=2640;break;case"location":n=3175;break}}else{$("section").each(function(t,r){if($(r).find("article").attr("id")==e){n=t*1500-500;if(n<0)n=750;$(window).scrollTop(n)}})}$(window).scrollTop(n)}function interfaceAnimateIn(){if(enable3D){$("#container").transition({opacity:1},250,"snap");$("#intro").parent().transition({transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"},250,"snap")}else{$("#container").transition({opacity:1},250,"snap")}}function onResize(){var e=$(window).width();var t=$(window).height();var n=$("article#speakers div.speaker div.imgContainer").first().width();$("article#speakers div.speaker div.imgContainer").height(n);if(t<780){$("#intro, #location").removeClass("verticallyCentered")}else{$("#intro, #location").addClass("verticallyCentered")}if(e<500){enable3D=false;$("body").addClass("mobile");$("#intro h1").fitText(1.1)}else{enable3D=true;$("body").removeClass("mobile");$("#intro h1").fitText(.7)}if(enable3D){$("#environment").height(t-400);var r=t-265;$("article").each(function(e,t){if($(t).attr("id")=="intro"||$(t).attr("id")=="location"){}else{$(t).css({height:r,"overflow-y":"scroll"})}});$("#lightbox").css("height",t-Math.floor(t*.2))}}function mouseHandler(e){function n(e,t){var n=e.clientX,r,i,s,o,u,a,f,l=e.clientY,c;if(t===false){return 0}c=t.time;r=t.clientX;i=t.clientY;s=Date.now();o=r-n;u=i-l;a=s-c;n=r;l=i;f=Math.sqrt(o*o+u*u)/a;return f}var t=false;$(document).mousemove(function(e){e.time=Date.now();var r;r=n(e,t);t=e;mouseVelocity=r})}function scrollHandler(){var e=$(window).scrollTop();var t;$(window).unbind("scroll").scroll(function(n){if(enable3D){e=$(window).scrollTop();if(e<50){if($("article#intro").parent().css("opacity")==panelOpacity){activateSection("intro");star_speed=(0-currentSectionIndex)*20;t=star_speed>0?1:-1;setTimeout(function(){currentSectionIndex=0;$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500);$("article#intro").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"});$("article#about").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -1000px)","-webkit-transform":"translate3d(0px, 0px, -1000px)"});$("article#speakers").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -2000px)","-webkit-transform":"translate3d(0px, 0px, -2000px)"});$("article#schedule").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -3000px)","-webkit-transform":"translate3d(0px, 0px, -3000px)"});$("article#location").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -4000px)","-webkit-transform":"translate3d(0px, 0px, 4000px)"})}}else if(e<1500){if($("article#about").parent().css("opacity")==panelOpacity){activateSection("about");star_speed=(1-currentSectionIndex)*20;t=star_speed>0?1:-1;setTimeout(function(){currentSectionIndex=1;$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500);$("article#intro").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 1000px)","-webkit-transform":"translate3d(0px, 0px, 1000px)"});$("article#about").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"});$("article#speakers").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -1000px)","-webkit-transform":"translate3d(0px, 0px, -1000px)"});$("article#schedule").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -2000px)","-webkit-transform":"translate3d(0px, 0px, -2000px)"});$("article#location").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -3000px)","-webkit-transform":"translate3d(0px, 0px, 3000px)"})}}else if(e<3e3){if($("article#speakers").parent().css("opacity")==panelOpacity){activateSection("speakers");star_speed=(2-currentSectionIndex)*20;t=star_speed>0?1:-1;setTimeout(function(){currentSectionIndex=2;$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500);$("article#intro").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 2000px)","-webkit-transform":"translate3d(0px, 0px, 2000px)"});$("article#about").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 1000px)","-webkit-transform":"translate3d(0px, 0px, 1000px)"});$("article#speakers").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"});$("article#schedule").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -1000px)","-webkit-transform":"translate3d(0px, 0px, -1000px)"});$("article#location").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -2000px)","-webkit-transform":"translate3d(0px, 0px, -2000px)"})}}else if(e<4500){if($("article#schedule").parent().css("opacity")==panelOpacity){activateSection("schedule");star_speed=(3-currentSectionIndex)*20;t=star_speed>0?1:-1;setTimeout(function(){currentSectionIndex=3;$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500);$("article#intro").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 3000px)","-webkit-transform":"translate3d(0px, 0px, 3000px)"});$("article#about").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 2000px)","-webkit-transform":"translate3d(0px, 0px, 2000px)"});$("article#speakers").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 1000px)","-webkit-transform":"translate3d(0px, 0px, 1000px)"});$("article#schedule").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"});$("article#location").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, -1000px)","-webkit-transform":"translate3d(0px, 0px, -1000px)"})}}else if(e<6e3){if($("article#location").parent().css("opacity")==panelOpacity){activateSection("location");star_speed=(4-currentSectionIndex)*20;t=star_speed>0?1:-1;setTimeout(function(){currentSectionIndex=4;$({_value:star_speed}).animate({_value:t},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500);$("article#intro").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 4000px)","-webkit-transform":"translate3d(0px, 0px, 4000px)"});$("article#about").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 3000px)","-webkit-transform":"translate3d(0px, 0px, 3000px)"});$("article#speakers").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 2000px)","-webkit-transform":"translate3d(0px, 0px, 2000px)"});$("article#schedule").parent().css({opacity:panelOpacity,transform:"translate3d(0px, 0px, 1000px)","-webkit-transform":"translate3d(0px, 0px, 1000px)"});$("article#location").parent().css({opacity:1,transform:"translate3d(0px, 0px, 0px)","-webkit-transform":"translate3d(0px, 0px, 0px)"})}}}})}function activateSection(e){$("header#header nav li a").each(function(t,n){if($(n).attr("href").indexOf(e)>-1){$(n).parent().addClass("active")}else{$(n).parent().removeClass("active")}});$("article#"+e).focus();if(navigator.userAgent.match(/Windows/)){$("section").each(function(t,n){$(n).show();if($(n).find("article").attr("id")!=e){setTimeout(function(){$(n).hide()},500)}})}}function animateCTA(){var e=["#FF0000","#007EFF","#01A400","#8e25fb"];var t;intervalCTA=setInterval(function(){t=e[Math.floor(Math.random()*e.length)];$("#buytickets button").transition({background:t},100,"cubic-bezier(0.42, 0, 0.58, 1)")},2500);$("#buytickets button").unbind("mouseenter").bind("mouseenter",function(e){$("#buytickets button").transition({background:"#fd96fd"},0);clearInterval(intervalCTA);clearTimeout(timeoutCTA)});$("#buytickets button").unbind("mouseleave").bind("mouseleave",function(e){$("#buytickets button").transition({background:t},0);animateCTA()})}function animateIntro(){var e=["blue","green","red","purple"];var t=shuffle($("#intro h1 div"));$(t).each(function(t,n){function r(){var t=Math.floor(Math.random()*20);if(t>9)t-=10;if(t==0)t=1;var i=t*250;t=Math.floor(Math.random()*e.length);var s=e[t];$(n).removeClass().addClass(s);setTimeout(function(){$(n).addClass("neon");setTimeout(function(){$(n).removeClass("neon");r()},150)},i)}r()})}function isMobile(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){return true}else{return false}}function isiPad(){return navigator.platform.indexOf("iPad")!=-1}function onOrientation(){if(isiPad()){$("header#header nav li").css({padding:"5px"});var e=window.orientation;if(e==0||e==180){$("html").css({"font-size":"100%"});$(".csstransforms3d #environment").css({top:"200px"});$("article#intro").css({"margin-top":"50px",overflow:"auto"});$("article").css({"margin-top":"30px",height:"auto"});$("article#location iframe").css({height:"400px"});$("article#location").css({"margin-top":"90px"});$("#location #map img").css({"margin-top":"55%"})}else if(e==90||e==-90){$("html").css({"font-size":"75%"});$(".csstransforms3d #environment").css({top:"160px"});$("article#intro").css({overflow:"hidden"});$("article").css({"margin-top":"60px","min-height":"320px"});$("article#location").css({"margin-top":"60px"});$("#location #map img").css({"margin-top":"15%"})}}}function showStarfield(){if($("#starfield").css("display")=="none"){$("#starfield").show();startStars()}$("#starfield").transition({opacity:1},500,"out",function(){$("html").css({background:"black"})})}function hideStarfield(){$("#starfield").transition({opacity:0},500,"out",function(){})}function showModal(){$("body").css("overflow","hidden");$("#dim").show();$("#lightbox").transition({opacity:1},250,"snap",function(){$("#lightbox").attr("tabindex",1);$("#lightbox").focus()});$("#dim").transition({opacity:1},250,"snap",function(){$("#dim button").bind("click",function(e){hideModal()})})}function hideModal(){$("body").css("overflow","auto");$("#lightbox").css({opacity:0});$("#dim").css({opacity:0});$("#dim").hide();$("#lightbox").empty();$("#speakers").attr("tabindex",1);$("#speakers").focus()}function shuffle(e){var t=e.length;var n;var r;while(0!==t){r=Math.floor(Math.random()*t);t-=1;n=e[t];e[t]=e[r];e[r]=n}return e}var mouseVelocity;var intervalCTA;var timeoutCTA;var colorInterval;var enable3D=true;var currentSectionIndex=0;var star_init_speed=100;var panelOpacity=.25;$(document).ready(function(){if(navigator.userAgent.match(/Windows/)){$("body").addClass("msie");panelOpacity=0}if(isiPad()||isMobile()){FastClick.attach(document.body)}$("section").first().next().after($("section").last());var e=[];var t=[];$(".speaker").each(function(n,r){var i=$(r).attr("id").split(" ")[1];var s={element:r,name:i};if(i!="more"){e.push(s)}else{t.push(s)}});e.sortBy(function(e){return e.name});$("#speakers div.speaker").remove();$(e).each(function(e,t){$("#speakers").append(t.element)});$(t).each(function(e,t){$(t.element).find("div.backdrop").remove();$(t.element).find("p").remove();$("#speakers").append(t.element)});$("#logo").bind("click",function(e){$(window).scrollTop(0);setTimeout(function(){$({_value:star_speed}).animate({_value:-1},{duration:1e3,easing:"easeOutQuart",step:function(){star_speed=this._value}})},500)});hijackLinks();$("form#mailChimp").ajaxChimp({url:"http://bloombergbusinessweekdesign.us3.list-manage.com/subscribe/post?u=f00bc2551187afbf5ff85bf4a&id=313c6fc06d",callback:mailChimpCallback});$("#schedule li strong").wrap('<div class="scheduleTime">');$("#schedule h3").each(function(e,t){var n=$(t).attr("id");var r=[];r.push(t);r.push($(t).next());r.push($(t).next().next());var i;if(n.indexOf("oos")>-1){i=$('<div class="session oos"></div>')}else{i=$('<div class="session" id="'+n+'"></div>')}i.insertBefore(r[0]);for(e=0;e<r.length;e++){$(i).append(r[e])}});$("#schedule div.session li p strong").parent().addClass("timeframe");$("div.timeframe").each(function(e,t){$(t).height($(t).parent().height())});$("#location p").each(function(e,t){var n=[];n.push(t);var r=$('<div class="mapLabel"></div>');r.insertBefore(n[0]);for(e=0;e<n.length;e++){$(r).append(n[e])}});$("#location .mapLabel p").fitText(1.6,{maxFontSize:"24px"});$("article").append("<p><br/></p>");window.onorientationchange=function(){onOrientation()};onOrientation();$(window).bind("resize",$.throttle(150,onResize));setTimeout(function(){if(!isMobile()){star_speed=star_init_speed;showStarfield();animateCTA();animateIntro()}if(enable3D){setTimeout(function(){interfaceAnimateIn();scrollHandler();mouseHandler();$({_value:star_init_speed}).animate({_value:1},{duration:1500,easing:"easeOutQuart",step:function(){star_speed=this._value}})},50);setTimeout(function(){$(window).scrollTop(0)},500)}else{interfaceAnimateIn()}$(window).resize()},500)});(function(){function t(e){for(var t=this.length;t;){var n=this[--t];this[t]=[].concat(e.call(n,n,t),n)}this.sort(function(e,t){for(var n=0,r=e.length;n<r;++n){if(e[n]!=t[n])return e[n]<t[n]?-1:1}return 0});for(var t=this.length;t;){this[--t]=this[t][this[t].length-1]}return this}if(typeof Object.defineProperty==="function"){try{Object.defineProperty(Array.prototype,"sortBy",{value:t})}catch(e){}}if(!Array.prototype.sortBy)Array.prototype.sortBy=t})()